function calculateBMI(e,t){var n=(t/(e*e)).toFixed(1);if(""==document.getElementById("height").value||""==document.getElementById("weight").value){document.getElementById("contrast").innerHTML="0.0",document.getElementById("result").innerHTML="0.0";var l="Error",o="Please enter height and weight";callModal(l,o)}else if(30>=n)1==document.getElementById("CTCA").checked?(document.getElementById("contrast").innerHTML="50mL",document.getElementById("result").innerHTML=n,examType="CTCA",bmi=n):1==document.getElementById("CABG").checked?(document.getElementById("contrast").innerHTML="75mL",document.getElementById("result").innerHTML=n,examType="CABG",bmi=n):1==document.getElementById("TRO").checked&&(document.getElementById("contrast").innerHTML="100mL",document.getElementById("result").innerHTML=n,examType="Triple Rule-Out",bmi=n);else if(n>37)1==document.getElementById("CTCA").checked?(document.getElementById("contrast").innerHTML="75mL",document.getElementById("result").innerHTML=n,examType="CTCA",bmi=n):1==document.getElementById("CABG").checked?(document.getElementById("contrast").innerHTML="100mL",document.getElementById("result").innerHTML=n,examType="CABG",bmi=n):1==document.getElementById("TRO").checked&&(document.getElementById("contrast").innerHTML="125mL",document.getElementById("result").innerHTML=n,examType="Triple Rule-Out",bmi=n);else if(n>30&&36>=n)if(1==document.getElementById("CTCA").checked){document.getElementById("contrast").innerHTML="50mL/75mL",document.getElementById("result").innerHTML=n;var l="Check Contrast",o="If chest not too big or muscular, consider 50mL, if not 75mL.";callModal(l,o),examType="CTCA",bmi=n}else if(1==document.getElementById("CABG").checked){document.getElementById("contrast").innerHTML="75mL/100mL",document.getElementById("result").innerHTML=n;var l="Check Contrast",o="If chest not too big or muscular, consider 75mL, if not 100mL.";callModal(l,o),examType="CABG",bmi=n}else 1==document.getElementById("TRO").checked&&(document.getElementById("contrast").innerHTML="150mL",document.getElementById("result").innerHTML=n,examType="Triple Rule-Out",bmi=n)}function calculateDLP(e,t){var n=(.014*e).toFixed(2),l=(.014*t).toFixed(2);if(""==document.getElementById("caScoreDLP").value&&""==document.getElementById("ctcaDLP").value){document.getElementById("caScoreResult").innerHTML="0.00mSv",document.getElementById("ctcaResult").innerHTML="0.00mSv";var o="Error",a="Please enter Ca Score and/or CTCA DLP";callModal(o,a)}else""==!document.getElementById("caScoreDLP").value&&""==document.getElementById("ctcaDLP").value?(document.getElementById("caScoreResult").innerHTML=n+"mSv",document.getElementById("ctcaResult").innerHTML="0.00mSv",caScoreDoseVal=n,ctcaDoseVal=l,caScoreDLPVal=$("#caScoreDLP").val(),ctcaDLPVal=$("#ctcaDLP").val()):""==!document.getElementById("ctcaDLP").value&&""==document.getElementById("caScoreDLP").value?(document.getElementById("caScoreResult").innerHTML="0.00mSv",document.getElementById("ctcaResult").innerHTML=l+"mSv",caScoreDoseVal=n,ctcaDoseVal=l,caScoreDLPVal=$("#caScoreDLP").val(),ctcaDLPVal=$("#ctcaDLP").val()):(document.getElementById("caScoreResult").innerHTML=n+"mSv",document.getElementById("ctcaResult").innerHTML=l+"mSv",caScoreDoseVal=n,ctcaDoseVal=l,caScoreDLPVal=$("#caScoreDLP").val(),ctcaDLPVal=$("#ctcaDLP").val())}function clearResultBMI(){var e=0,t=$("#result"),n=$("#contrast"),l=$("#height"),o=$("#weight");t.html(e.toFixed(1)),n.html(e.toFixed(1)),l.val(""),o.val(""),examType="",bmi=""}function clearResultDLP(){var e=0;document.getElementById("caScoreResult").innerHTML=e.toFixed(2)+"mSv",document.getElementById("ctcaResult").innerHTML=e.toFixed(2)+"mSv",document.getElementById("caScoreDLP").value="",document.getElementById("ctcaDLP").value=""}function callModal(e,t){$("#modalTitle").html(e),$("#modalText").html(t),$("#myModal").modal("show")}function populateDropdown(e){for(var t=document.getElementById(e),n=0;n<techsArray.length;++n)t[t.length]=new Option(techsArray[n],techsArray[n])}function startNext(){patientName="",examType="",bmi="",assignBoxVal="",ppwBoxVal="",chestBoxVal="",cascoreBoxVal="",widenBoxVal="",betalocBoxVal="",betalocAmountBoxVal="",nitroBoxVal="",ctcaBoxVal="",scannedFromBoxVal="",scannedToBoxVal="",chestScanBoxVal="",ecgBoxVal="",bestBoxVal="",bestVolumeVal="",bestUnitsVal="",sendVolBoxVal="",emailBoxVal="",bpBoxVal="",caScoreDoseVal="",ctcaDoseVal="",caScoreDLPVal="",ctcaDLPVal="",$("#title").html("Patient Name"),$("#message").html("Enter patient name."),$("#nameRow").show(),$("#startRow").hide()}function nameNext(){if(""==document.getElementById("firstName").value||""==document.getElementById("lastName").value){var e="Error",t="Please enter patient first and last name before continuing";callModal(e,t)}else document.getElementById("title").innerHTML="BMI",document.getElementById("message").innerHTML="Enter patient height and weight to calculate BMI.",$("#bmiRow").show(),$("#nameRow").hide(),patientName=document.getElementById("firstName").value+" "+document.getElementById("lastName").value}function bmiNext(){if(""==examType||""==bmi){var e="Error",t="Please calculate BMI before continuing";callModal(e,t)}else document.getElementById("title").innerHTML="Checklist",document.getElementById("message").innerHTML="Enter technician initials and check off as completed.",$("#checklistRow").show(),$("#bmiRow").hide(),populateDropdown("assignBox"),populateDropdown("ppwBox"),populateDropdown("chestBox"),populateDropdown("cascoreBox"),populateDropdown("widenBox"),populateDropdown("betalocBox"),populateDropdown("nitroBox"),populateDropdown("ctcaBox"),populateDropdown("chestScanBox"),populateDropdown("ecgBox"),populateDropdown("bestBox"),populateDropdown("sendVolBox"),populateDropdown("emailBox"),populateDropdown("bpBox")}function checklistNext(){if(0==document.getElementById("assignCheck").checked||0==document.getElementById("ppwCheck").checked||0==document.getElementById("chestCheck").checked||0==document.getElementById("cascoreCheck").checked||0==document.getElementById("widenCheck").checked||0==document.getElementById("betalocCheck").checked||0==document.getElementById("nitroCheck").checked||0==document.getElementById("ctcaCheck").checked||0==document.getElementById("chestScanCheck").checked||0==document.getElementById("ecgCheck").checked||0==document.getElementById("bestCheck").checked||""==document.getElementById("bestVolume").value||0==document.getElementById("sendVolCheck").checked||0==document.getElementById("emailCheck").checked||0==document.getElementById("bpCheck").checked){var e="Error",t="Please check all values are filled in and checked off before continuing";callModal(e,t)}else assignBoxVal=$("#assignBox").val(),ppwBoxVal=$("#ppwBox").val(),chestBoxVal=$("#chestBox").val(),cascoreBoxVal=$("#cascoreBox").val(),widenBoxVal=$("#widenBox").val(),betalocBoxVal=$("#betalocBox").val(),betalocAmountBoxVal=$("#betalocAmountBox").val(),nitroBoxVal=$("#nitroBox").val(),ctcaBoxVal=$("#ctcaBox").val(),scannedFromBoxVal=$("#scannedFromBox").val(),scannedToBoxVal=$("#scannedToBox").val(),chestScanBoxVal=$("#chestScanBox").val(),ecgBoxVal=$("#ecgBox").val(),bestBoxVal=$("#bestBox").val(),bestVolumeVal=$("#bestVolume").val(),bestUnitsVal=$("#bestUnits").val(),sendVolBoxVal=$("#sendVolBox").val(),emailBoxVal=$("#emailBox").val(),bpBoxVal=$("#bpBox").val(),document.getElementById("title").innerHTML="DLP",document.getElementById("message").innerHTML="Enter DLP to calculate patient dose.",$("#dlpRow").show(),$("#checklistRow").hide()}function finishNext(){if(""==caScoreDoseVal||""==ctcaDoseVal){var e="Error",t="Please calculate patient dose before continuing";callModal(e,t)}else{$("#printRow").show(),$("#dlpRow").hide(),$("#title").html("Print"),$("#message").html("Please print the finished page using the buttons at the bottom."),$("#nameTitle").html(patientName);var n=new Date;$("#dateTitle").html(n.toDateString()),$("#ExamType").html(examType),$("#BMI").html(bmi),$("#Scanned").html(scannedFromBoxVal+" to "+scannedToBoxVal),$("#BestVolume").html(bestVolumeVal+bestUnitsVal),$("#CaScoreDLPPrint").html(caScoreDoseVal+"mGy.cm"),$("#CTCADLPPrint").html(ctcaDoseVal+"mGy.cm"),$("#CaScoreDosePrint").html(caScoreDoseVal+"mSv"),$("#CTCADosePrint").html(ctcaDoseVal+"mSv"),$("#AssignRadiologist").html(assignBoxVal),$("#PutIntoPPW").html(ppwBoxVal),$("#CheckIfChestNeeded").html(chestBoxVal),$("#CalciumScoreScan").html(cascoreBoxVal),$("#WidenVolume2and3").html(widenBoxVal),$("#Betaloc").html(betalocBoxVal),$("#BetalocAmount").html(betalocAmountBoxVal),$("#NitroLingualSpray").html(nitroBoxVal),$("#CTCAScan").html(ctcaBoxVal),$("#PostChest").html(chestScanBoxVal),$("#SendEmail").html(emailBoxVal),$("#SendECG").html(ecgBoxVal),$("#SelectBestVolume").html(bestBoxVal),$("#Send3Volumes").html(sendVolBoxVal),$("#TakeBloodPressure").html(bpBoxVal),$("#BigBestVol").html(bestVolumeVal+bestUnitsVal)}}function namePrev(){document.getElementById("title").innerHTML="New Scan",document.getElementById("message").innerHTML="Enter details for a new scan.",$("#startRow").show(),$("#nameRow").hide()}function bmiPrev(){document.getElementById("title").innerHTML="Patient Name",document.getElementById("message").innerHTML="Enter patient name",$("#nameRow").show(),$("#bmiRow").hide()}function checklistPrev(){document.getElementById("title").innerHTML="BMI",document.getElementById("message").innerHTML="Enter technician initials and check off as completed.",$("#bmiRow").show(),$("#checklistRow").hide()}function dlpPrev(){$("#title").html("Checklist"),$("#message").html("Enter patient height and weight to calculate BMI."),$("#checklistRow").show(),$("#dlpRow").hide()}function printChecklist(){printTally++,window.print()}function restartNewScan(){if(0==printTally){var e="Print",t="Please print the sheet before restarting";callModal(e,t)}else printTally=0,window.location.href="NewScan"}var techsArray=["N/A","AHR","AMN","BPD","EMS","ETS","HHY","HMD","HWN","JDD","JPS","KNG","LRE","MAE","PJS","SWM","TBE","TBN","VPR"],patientName="",examType="",bmi="",assignBoxVal="",ppwBoxVal="",chestBoxVal="",cascoreBoxVal="",widenBoxVal="",betalocBoxVal="",betalocAmountBoxVal="",nitroBoxVal="",ctcaBoxVal="",scannedFromBoxVal="",scannedToBoxVal="",chestScanBoxVal="",ecgBoxVal="",bestBoxVal="",bestVolumeVal="",bestUnitsVal="",sendVolBoxVal="",emailBoxVal="",bpBoxVal="",caScoreDoseVal="",ctcaDoseVal="",caScoreDLPVal="",ctcaDLPVal="",printTally=0;